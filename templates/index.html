{% extends "base.html" %}

{% block content %}
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
        {% for category, message in messages %}
            <div class="alert alert-{{ category }}">{{ message }}</div>
        {% endfor %}
    {% endif %}
{% endwith %}

<h2>Saved Searches</h2>
{% for id, search in searches.items() %}
    <div class="search-item">
        <h3>{{ search.name }}</h3>
        <p><strong>Type:</strong> {{ search.criteria.type }}</p>
        {% if search.criteria.type == 'user' %}
            <p><strong>Usernames:</strong> {{ search.criteria.usernames|join(', ') }}</p>
        {% else %}
            <p><strong>Keywords:</strong> {{ search.criteria.keywords|join(', ') }}</p>
        {% endif %}
        <p><strong>Notifications:</strong> {{ 'Enabled' if search.notify else 'Disabled' }}</p>
        <div class="button-group">
            <a href="{{ url_for('view_matches', search_id=id) }}" class="btn">View Matches</a>
            <a href="{{ url_for('edit_search', search_id=id) }}" class="btn" style="background: #0066cc;">Edit</a>
            <a href="{{ url_for('delete_search', search_id=id) }}" class="btn" style="background: #cc0000;" onclick="return confirm('Are you sure you want to delete this search?')">Delete</a>
        </div>
    </div>
{% endfor %}
{% endblock %}